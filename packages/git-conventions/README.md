<!-- Generated by @talon/sip. Update this documentation by updating the source code. -->

# @talon/git-conventions

> conventional commits and semantic tags

**Table of Contents**

<!-- toc -->

- [commit](#commit)
- [format](#format)
- [affects](#affects)
- [current](#current)
- [bump](#bump)

<!-- tocstop -->

## commit

Create a conventionally formatted commit

### Parameters

- `options` **[object][1]** Extend the base convention
  - `options.types` **[Array][2]&lt;[string][3]>?** the available commit types
  - `options.footers` **[Array][2]&lt;[Function][4]>?** include footer information

Returns **[Promise][5]&lt;[string][3]>** a conventionally formatted commit message

## format

[The Conventional Commits specification][6] is a lightweight convention on top of commit messages. It provides an easy set of rules for creating an explicit commit history; which makes it easier to write automated tools on top of. This convention dovetails with SemVer, by describing the features, fixes, and breaking changes made in commit messages.

```js
import {format} from "./lib/commit"
describe("format", () => {
```

Commits MUST be prefixed with a type, which consists of a noun, feat, fix, etc. followed by a [...] REQUIRED terminal colon and space.

A description MUST immediately follow the colon and space after the type/scope prefix. The description is a short summary of the code changes

```js
it("formats commits conventionally", () => {
  expect(
    format({
      type: "feat",
      description: "improve stuff"
    })
  ).toBe("feat: improve stuff")
})
```

A scope MAY be provided after a type. A scope MUST consist of a noun describing a section of the codebase surrounded by parenthesis

```js
it("handles optional scopes", () => {
  expect(
    format({
      type: "feat",
      scope: "sip",
      description: "improve stuff"
    })
  ).toBe("feat(sip): improve stuff")
})
```

A longer commit body MAY be provided after the short description, providing additional contextual information about the code changes

A commit body is free-form and MAY consist of any number of newline separated paragraphs.

```js
it("handles optional body", () => {
  expect(
    format({
      type: "feat",
      description: "improve stuff",
      body: "you would not believe it\ncause that's what we do"
    })
  ).toBe(
    `feat: improve stuff\n\nyou would not believe it\ncause that's what we do`
  )
})
```

One or more footers MAY be provided one blank line after the body.

```js
  it("handles optional footer", () => {
    expect(format({
      type: "feat",
      description: "improve stuff",
      footer: {
        "Reviewed-by": "talon",
        "affects": "git-conventions"
      }
    })).toBe(`feat: improve stuff\n\nReviewed-by: talon\naffects: git-conventions`)
  })
})
```

### Parameters

- `options` **[object][1]** the commit options
  - `options.type` **[string][3]** the commit type
  - `options.scope` **[string][3]?** the scope of the commit
  - `options.description` **[string][3]** a terse desription of the commit
  - `options.body` **[string][3]?** a detailed explanation of the commit
  - `options.footer` **[object][1]?** follow a convention similar to git trailer format

Returns **[string][3]** a conventional commit

## affects

Finds sources affected by a commit and prompts if they should be included
as `affects: [source]` in the footer

### Parameters

- `sources` **[string][3]** the directory where independently versioned sources exist

Returns **[Function][4]** used to create the footer in `commit`

## current

Get the current version of a source

### Parameters

- `source` **[string][3]** the source to grab the version from

Returns **[Promise][5]&lt;[string][3]>** the most recent version of the source

## bump

Get the next version of a source

### Parameters

- `source` **[string][3]** the source to operate on
- `version` **[string][3]** the current version to bump

Returns **[Promise][5]&lt;[object][1]>** the next recommended release type, version and reason

[1]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object
[2]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array
[3]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String
[4]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function
[5]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
[6]: https://www.conventionalcommits.org/en/v1.0.0
